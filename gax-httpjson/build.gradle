
archivesBaseName = "gax-httpjson"

dependencies {
  compile project(':gax'),
    libraries.guava,
    libraries.jsr305,
    libraries.autovalue,
    libraries.threetenbp,
    libraries.httpClient,
    libraries.auth,
    libraries.authCredentials,
    libraries.apiCommon

  testCompile project(':gax').sourceSets.test.output,
    libraries.junit,
    libraries.mockito,
    libraries.truth,
    libraries.commons

  apt libraries.autovalue

  shadowNoGuava libraries.guava
}

task createProperties(dependsOn: processResources) {
  doLast {
    def propertiesDir = "$buildDir/resources/main/com/google/api/gax/httpjson/"
    new File(propertiesDir).mkdirs()
    Properties p = new Properties()
    p['version'] = project.version.toString()
    p.store(new PrintWriter(propertiesDir + "project.properties", "UTF-8"), null)
  }
}

classes {
  dependsOn createProperties
}
