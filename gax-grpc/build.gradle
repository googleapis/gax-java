archivesBaseName = 'gax-grpc'

// TODO: Populate this from dependencies.properties version property (for proper Gradle-Bazel sync)
project.version = "2.19.1-SNAPSHOT" // {x-version-update:gax-grpc:current}

dependencies {
  api(project(':gax'),
    libraries['maven.com_google_api_api_common'],
    libraries['maven.com_google_api_grpc_proto_google_common_protos'],
    libraries['maven.com_google_auth_google_auth_library_credentials'],
    libraries['maven.com_google_guava_guava'],
    libraries['maven.io_grpc_grpc_api'],
    libraries['maven.org_threeten_threetenbp'])

  implementation(libraries['maven.com_google_auth_google_auth_library_oauth2_http'],
    libraries['maven.com_google_code_findbugs_jsr305'],
    libraries['maven.io_grpc_grpc_alts'],
    libraries['maven.io_grpc_grpc_auth'],
    libraries['maven.io_grpc_grpc_netty_shaded'],
    libraries['maven.io_grpc_grpc_protobuf'],
    libraries['maven.io_grpc_grpc_stub'])

  runtimeOnly libraries['maven.io_grpc_grpc_googleapis']

  compileOnly(libraries['maven.com_google_auto_value_auto_value'],
          libraries['maven.org_graalvm_sdk'])

  testImplementation( project(':gax').sourceSets.test.output,
    libraries['maven.junit_junit'],
    libraries['maven.org_mockito_mockito_core'],
    libraries['maven.com_google_truth_truth'],
    libraries['maven.com_google_api_grpc_grpc_google_common_protos'])

  annotationProcessor libraries['maven.com_google_auto_value_auto_value']

  shadowNoGuava libraries['maven.com_google_guava_guava'],
    libraries['maven.io_grpc_grpc_stub'],
    libraries['maven.io_grpc_grpc_protobuf']
}

jar {
  manifest {
    attributes 'Specification-Title': project.name,
      'Specification-Version': project.version,
      'Specification-Vendor': libraryVendor,
      'Implementation-Title': project.name,
      'Implementation-Version': project.version,
      'Implementation-Vendor': libraryVendor
  }
}
